<!doctype html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, minimal-ui">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>军武次位面</title>
    <meta name="description" content="">
    <meta name="keywords" content=""> 
    <link rel="stylesheet" href="./style/common.css" media="all">
</head>

<body>
<div class="wrapper">
	<header class="top_bar">
		<a class="search_a" href="#">搜索</a>
		
		<div class="menu_btn"></div>
		<div class="nav_list_wrap">
			<ul class="nav_list">
				<li class="nav_item" id="home"><a href="####">首页</a></li>
				<li class="nav_item" id="news"><a href="####">军事新闻</a></li>
				<li class="nav_item" id="video"><a href="####">视频栏目</a></li>
				<li class="nav_item" id="game"><a href="####">游戏推荐</a></li>
				<li class="nav_item" id="contact"><a href="####">联系我们</a></li>
			</ul>
			<div class="nav_close"></div>
		</div>

		<div class="logo"></div>
	</header><!-- .top_bar -->

	<div class="waterfalls">
		<!--
		<a>
			<span>
				<img src="./img/waterfalls_0.jpg" alt="">
				<strong>三国争霸2游戏壁纸三国争霸2游戏壁纸三国争霸2游戏壁纸三国争霸2游戏壁纸</strong>
			</span>
		</a>
		<a>
			<span>
				<img src="./img/waterfalls_1.jpg" alt="">
				<strong>三国争霸2游戏壁纸</strong>
			</span>
		</a>
		<a>
			<span>
				<img src="./img/waterfalls_2.jpg" alt="">
				<strong>三国争霸2游戏壁纸</strong>
			</span>
		</a>
		<a>
			<span>
				<img src="./img/waterfalls_3.jpg" alt="">
				<strong>三国争霸2游戏壁纸</strong>
			</span>
		</a>
		<a>
			<span>
				<img src="./img/waterfalls_0.jpg" alt="">
				<strong>三国争霸2游戏壁纸</strong>
			</span>
		</a>
		<a>
			<span>
				<img src="./img/waterfalls_1.jpg" alt="">
				<strong>三国争霸2游戏壁纸</strong>
			</span>
		</a>
		<a>
			<span>
				<img src="./img/waterfalls_2.jpg" alt="">
				<strong>三国争霸2游戏壁纸</strong>
			</span>
		</a>
		<a>
			<span>
				<img src="./img/waterfalls_3.jpg" alt="">
				<strong>三国争霸2游戏壁纸</strong>
			</span>
		</a>
		-->
<a data-img="http://233.crazy262.net//uploads/20160526/aircraft-wallpaper-military-images.jpg">
			<span>
				<img src="http://233.crazy262.net//uploads/20160526/aircraft-wallpaper-military-images.jpg" alt="">
							</span>
		</a><a data-img="http://233.crazy262.net//uploads/20160526/f1ecf909cc0925205c42141535da5fe6_1920_1080.jpg" style="position: absolute; width: calc(50% - 4px); transform: translate3d(calc(100% + 0px), 0px, 0px);">
			<span>
				<img src="http://233.crazy262.net//uploads/20160526/f1ecf909cc0925205c42141535da5fe6_1920_1080.jpg" alt="">
							</span>
		</a><a data-img="http://233.crazy262.net//uploads/20160526/9365e003jw1eqxdh9dcrhg20go080h88.gif" style="position: absolute; width: calc(50% - 4px); transform: translate3d(calc(0% + 0px), 109px, 0px);">
			<span>
				<img src="http://233.crazy262.net//uploads/20160526/9365e003jw1eqxdh9dcrhg20go080h88.gif" alt="">
							</span>
		</a><a data-img="http://233.crazy262.net//uploads/20160526/wallpaper.jpg" style="position: absolute; width: calc(50% - 4px); transform: translate3d(calc(0% + 0px), 203px, 0px);">
			<span>
				<img src="http://233.crazy262.net//uploads/20160526/wallpaper.jpg" alt="">
							</span>
		</a><a data-img="http://233.crazy262.net//uploads/20160526/f29d8b13632762d0b04817b0a4ec08fa513dc638.jpg" style="position: absolute; width: calc(50% - 4px); transform: translate3d(calc(100% + 0px), 252px, 0px);">
			<span>
				<img src="http://233.crazy262.net//uploads/20160526/f29d8b13632762d0b04817b0a4ec08fa513dc638.jpg" alt="">
							</span>
		</a><a data-img="http://233.crazy262.net//uploads/20160526/1fb75223125264194c8e4c5e1c478eb2_1920_1080.jpg" style="position: absolute; width: calc(50% - 4px); transform: translate3d(calc(0% + 0px), 323px, 0px);">
			<span>
				<img src="http://233.crazy262.net//uploads/20160526/1fb75223125264194c8e4c5e1c478eb2_1920_1080.jpg" alt="">
							</span>
		</a><a data-img="http://233.crazy262.net//uploads/20160526/a3baedf2eebb5ce8c22114866b1052b9_1920_1080.jpg" style="position: absolute; width: calc(50% - 4px); transform: translate3d(calc(100% + 0px), 361px, 0px);">
			<span>
				<img src="http://233.crazy262.net//uploads/20160526/a3baedf2eebb5ce8c22114866b1052b9_1920_1080.jpg" alt="">
							</span>
		</a><a data-img="http://233.crazy262.net//uploads/20160526/d3cd612296920759de7b636cb3f6884e_1920_1080.jpg" style="position: absolute; width: calc(50% - 4px); transform: translate3d(calc(100% + 0px), 381px, 0px);">
			<span>
				<img src="http://233.crazy262.net//uploads/20160526/d3cd612296920759de7b636cb3f6884e_1920_1080.jpg" alt="">
							</span>
		</a><link rel="stylesheet" href="/statics/css/common.css" media="all" style="position: absolute; width: calc(50% - 4px); transform: translate3d(calc(100% + 0px), 401px, 0px);">
    			<a data-img="http://233.crazy262.net//uploads/20160526/0c5d10dfa9ec8a13266ce4eff303918fa0ecc038.jpg" style="position: absolute; width: calc(50% - 4px); transform: translate3d(calc(100% + 0px), 401px, 0px);">
			<span>
				<img src="http://233.crazy262.net//uploads/20160526/0c5d10dfa9ec8a13266ce4eff303918fa0ecc038.jpg" alt="">
							</span>
		</a>
	</div><!-- /.waterfalls -->
	
</div><!-- /.wrapper -->

<footer>
    © 2015 军武次位面 京ICP备15033829号   版权所有
</footer>
    
<script type="text/javascript" src="js/zepto.min.js"></script>
<script type="text/javascript" src="js/jquery.waterfall.js"></script>
<script type="text/javascript" src="js/main.js"></script>
<script type="text/javascript">
$(function(){
	fWaterfall()

	// var sWaterfalls = '<a><span><img src="./img/waterfalls_1.jpg" alt=""><strong>Blahblah</strong></span></a><a><span><img src="./img/waterfalls_3.jpg" alt=""><strong>99999999<br />1111111</strong></span></a>'
	var sWaterfalls = '<a data-img="http://233.crazy262.net/uploads/20160526/ed026a8b2617fdfcccf0466358fcabee_1920_1080.jpg" style="position: absolute; width: calc(50% - 4px); transform: translate3d(calc(100% + 0px), 501px, 0px);"><span><img src="http://233.crazy262.net/uploads/20160526/ed026a8b2617fdfcccf0466358fcabee_1920_1080.jpg" alt=""></span></a><a data-img="http://233.crazy262.net//uploads/20160527/20160527040606.jpg" style="position: absolute; width: calc(50% - 4px); transform: translate3d(calc(0% + 0px), 514px, 0px);"><span><img src="http://233.crazy262.net//uploads/20160527/20160527040606.jpg" alt=""></span></a>'
	$(window).scroll(function(){
		var scrollTop = $(this).scrollTop();
		var scrollHeight = $(document).height();
		var windowHeight = $(this).height();
		//已滚动到底部
		if(scrollTop + windowHeight == scrollHeight){
			if(oWaterfall.hasClass('loading')){
				return
			}
			oWaterfall.addClass('loading')

			$.ajax({
				url: '',
				type: 'post',
				data: {},
				success: function(data){
					// console.log(data)

					/*
					if(data){
						oWaterfall.append(data);
					}else{
						oWaterfall.remove()							
					}
					oWaterfall.removeClass('loading')
					*/

					//测试代码，删掉就好。把上边注释掉的代码段打开使用
					setTimeout(function(){
						oWaterfall.append(sWaterfalls)
						fWaterfall()
					}, 1500)
					oWaterfall.removeClass('loading')
				},
				error: function(data){
					// console.log('error: ', data)
					oWaterfall.removeClass('loading')
				}
			})
		}
	});
})

var oWaterfall = $(".waterfalls")
function fWaterfall(){
	oWaterfall.waterfall({
		colMinWidth: 140
	});
	oWaterfall.find('img').on('load', function(){
		oWaterfall.waterfall({
			colMinWidth: 140
		});
	})
}
</script>
</body>
</html>